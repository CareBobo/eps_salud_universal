<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Admin Dashboard - EPS Salud Universal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
      body {
        background-color: #121212;
        color: #fff;
      }
      .sidebar {
        background-color: #1f1f1f;
      }
      .sidebar a {
        color: #39ff14; /* Cambiado para mejor visibilidad */
        text-decoration: none;
        font-size: 1.2rem;
        font-weight: bold;
        text-shadow: 0 0 5px #39ff14, 0 0 10px #39ff14, 0 0 20px #39ff14;
        transition: all 0.3s ease;
      }
      .sidebar a:hover {
        color: white;
        text-shadow: 0 0 10px #39ff14, 0 0 20px #39ff14, 0 0 30px #39ff14;
      }
      .btn-sm {
        padding: 0.2rem 0.5rem;
        font-size: 0.8rem;
      }
      .content-section {
        display: none;
      }
      .content-section.active {
        display: block;
      }
    </style>
  </head>
  <body>
    <!-- navbar común -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark px-3">
      <h3 class="text-center py-3 border-bottom border-secondary">Administrador - EPS Salud Universal</h3>

      {% if role == 'admin' %}
        <a href="#" onclick="showSection('doctores')" class="p-3 nav-link" data-section="doctores">Doctores</a>
        <a href="#" onclick="showSection('pacientes')" class="p-3 nav-link" data-section="pacientes">Pacientes</a>
        <a href="#" onclick="showSection('unidades')" class="p-3 nav-link" data-section="unidades">Unidades</a>
        <a href="#" onclick="showSection('agregarDoctor')" class="p-3 nav-link" data-section="agregarDoctor">Agregar Doctor</a>
        <a href="#" onclick="showSection('agregarPaciente')" class="p-3 nav-link" data-section="agregarPaciente">Agregar Paciente</a>
        <a href="#" onclick="showSection('agregarUnidad')" class="p-3 nav-link" data-section="agregarUnidad">Agregar Unidad</a>
      {% endif %}

      <a href="{{ url_for('logout') }}" class="btn btn-danger mt-auto mx-3 mb-3">Cerrar Sesión</a>
    </nav>
    <main class="flex-grow-1 p-4" style="min-height: 100vh; overflow-y:auto;">
      <!-- Sección Doctores -->
      <section id="doctores" class="content-section">
        <h2>Lista de Doctores</h2>
        <button class="btn btn-primary mb-3" onclick="fetchDoctors()">Cargar Doctores</button>
        <ul class="list-group" id="doctorList"></ul>
      </section>

      <!-- Sección Pacientes -->
      <section id="pacientes" class="content-section">
        <h2>Lista de Pacientes</h2>
        <button class="btn btn-primary mb-3" onclick="fetchPatients()">Cargar Pacientes</button>
        <ul class="list-group" id="patientList"></ul>
      </section>

      <!-- Sección Unidades -->
      <section id="unidades" class="content-section">
        <h2>Lista de Unidades</h2>
        <button class="btn btn-primary mb-3" onclick="fetchUnidades()">Cargar Unidades</button>
        <ul class="list-group" id="unidadList"></ul>
      </section>

      <!-- Formulario Agregar Doctor -->
      <section id="agregarDoctor" class="content-section">
        <h2>Agregar Doctor</h2>
        <form id="formDoctor">
          <input type="hidden" id="docId" />
          <div class="mb-3">
            <label class="form-label">Identificación</label>
            <input type="text" id="docIdentificacion" class="form-control" required />
          </div>
          <div class="mb-3">
            <label class="form-label">Nombre</label>
            <input type="text" id="docNombre" class="form-control" required />
          </div>
          <div class="mb-3">
            <label class="form-label">Apellido</label>
            <input type="text" id="docApellido" class="form-control" required />
          </div>
          <div class="mb-3">
            <label class="form-label">Dirección</label>
            <input type="text" id="docDireccion" class="form-control" />
          </div>
          <div class="mb-3">
            <label class="form-label">Teléfono</label>
            <input type="text" id="docTelefono" class="form-control" />
          </div>
          <div class="mb-3">
            <label class="form-label">Especialidad</label>
            <input type="text" id="docEspecialidad" class="form-control" />
          </div>
          <div class="mb-3">
            <label class="form-label">Jornada Laboral</label>
            <select id="docJornada" class="form-select">
              <option value="Matinal">Matinal</option>
              <option value="Vespertina">Vespertina</option>
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">Contraseña</label>
            <input type="password" id="docContrasena" class="form-control" required />
          </div>
          <button type="submit" class="btn btn-success">Guardar Doctor</button>
          <button type="button" id="cancelUpdateDoctor" class="btn btn-secondary ms-2" style="display:none;">Cancelar</button>
          <p id="mensajeDoctor" class="mt-2"></p>
        </form>
      </section>

      <!-- Formulario Agregar Paciente -->
      <section id="agregarPaciente" class="content-section">
        <h2>Agregar Paciente</h2>
        <form id="formPaciente">
          <input type="hidden" id="userIdHidden" value="{{ user_id }}" />
          <div class="mb-3">
            <label class="form-label">Identificación</label>
            <input type="text" id="identificacion" class="form-control" required />
          </div>
          <div class="mb-3">
            <label class="form-label">Nombre</label>
            <input type="text" id="nombre" class="form-control" required />
          </div>
          <div class="mb-3">
            <label class="form-label">Apellido</label>
            <input type="text" id="apellido" class="form-control" required />
          </div>
          <div class="mb-3">
            <label class="form-label">Dirección</label>
            <input type="text" id="direccion" class="form-control" />
          </div>
          <div class="mb-3">
            <label class="form-label">Edad</label>
            <input type="number" id="edad" class="form-control" />
          </div>
          <div class="mb-3">
            <label class="form-label">Tipo de Afiliación</label>
            <input type="text" id="tipoAfiliacion" class="form-control" />
          </div>
          <div class="mb-3">
            <label class="form-label">Fecha de Ingreso</label>
            <input type="date" id="fechaIngreso" class="form-control" />
          </div>
          <div class="mb-3">
            <label class="form-label">Contraseña</label>
            <input type="password" id="pacContrasena" class="form-control" required />
          </div>
          <button type="submit" class="btn btn-primary">Guardar Paciente</button>
          <button type="button" id="cancelUpdatePaciente" class="btn btn-secondary ms-2" style="display:none;">Cancelar</button>
          <p id="mensajePaciente" class="mt-2"></p>
        </form>
      </section>

      <!-- Formulario Agregar Unidad -->
      <section id="agregarUnidad" class="content-section">
        <h2>Agregar Unidad</h2>
        <form id="formUnidad">
          <input type="hidden" id="unidadId" />
          <div class="mb-3">
            <label class="form-label">Nombre</label>
            <input type="text" id="unidadNombre" class="form-control" required />
          </div>
          <div class="mb-3">
            <label class="form-label">Planta</label>
            <input type="text" id="unidadPlanta" class="form-control" required />
          </div>
          <div class="mb-3">
            <label class="form-label">ID Doctor Responsable</label>
            <input type="number" id="unidadDoctorId" class="form-control" required />
          </div>
          <button type="submit" class="btn btn-success">Guardar Unidad</button>
          <button type="button" id="cancelUpdateUnidad" class="btn btn-secondary ms-2" style="display:none;">Cancelar</button>
          <p id="mensajeUnidad" class="mt-2"></p>
        </form>
      </section>

      <!-- Carrusel -->
      <div id="carouselEPS" class="carousel slide mb-5" data-bs-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img src="{{ url_for('static', filename='imagenes/carrusel1.webp') }}" class="d-block w-100 carousel-img" alt="EPS 1" />
          </div>
          <div class="carousel-item">
            <img src="{{ url_for('static', filename='imagenes/carrusel2.webp') }}" class="d-block w-100 carousel-img" alt="EPS 2" />
          </div>
          <div class="carousel-item">
            <img src="{{ url_for('static', filename='imagenes/carrusel3.webp') }}" class="d-block w-100 carousel-img" alt="EPS 3" />
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselEPS" data-bs-slide="prev"><span class="carousel-control-prev-icon"></span></button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselEPS" data-bs-slide="next"><span class="carousel-control-next-icon"></span></button>
      </div>
      <!-- Textos extra -->
      <div class="text-section">
        <h2>Nuestra Misión</h2>
        <p>Brindar servicios de salud integrales con calidad, eficiencia y calidez humana, comprometidos con el bienestar de nuestros usuarios.</p>

        <h2 class="mt-4">Visión</h2>
        <p>Ser la EPS líder en atención médica en el país, reconocida por su excelencia en el servicio y el compromiso con la salud de la comunidad.</p>
      </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
  </body>
</html>
